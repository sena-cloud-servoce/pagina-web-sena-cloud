<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SENA CLOUD SERVICES</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff; /* Azul vibrante */
            --secondary-color: #4CAF50; /* Verde para botones */
            --dark-bg: rgba(0, 0, 0, 0.6); /* Fondo oscuro semi-transparente */
            --light-bg: rgba(255, 255, 255, 0.95); /* Fondo claro casi opaco */
            --text-color-light: #f0f0f0; /* Blanco casi puro */
            --text-color-dark: #333; /* Gris oscuro para texto */
            --border-radius-sm: 8px;
            --border-radius-md: 15px;
            --border-radius-lg: 25px;
            --shadow-light: 0 4px 8px rgba(0, 0, 0, 0.2);
            --shadow-medium: 0 8px 16px rgba(0, 0, 0, 0.3);
            --shadow-strong: 0 10px 25px rgba(0, 0, 0, 0.4);

            /* Nuevas variables para alturas fijas */
            --top-title-height: 80px; /* Altura estimada para el título principal fijo */
            --header-height: 80px; /* Altura estimada para la barra de navegación fija */
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-image: url('fondo.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text-color-light); /* Color de texto predeterminado para el body */
            text-align: center;
            line-height: 1.6;
            /* Añadir padding superior para que el contenido no quede debajo de los elementos fijos */
            padding-top: calc(var(--top-title-height) + var(--header-height));
        }

        /* Nuevo estilo para el título principal fijo en la parte superior */
        #top-fixed-title {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: var(--dark-bg); /* Fondo oscuro */
            color: var(--text-color-light);
            padding: 15px 0; /* Ajustar padding para controlar la altura */
            text-align: center;
            z-index: 1002; /* El z-index más alto para estar encima de todo */
            box-shadow: var(--shadow-medium);
        }

        #top-fixed-title h1 {
            font-size: 3em; /* Tamaño de fuente ajustado para la barra superior */
            margin: 0; /* Eliminar margen predeterminado */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            letter-spacing: 1px;
        }

        header {
            background-color: var(--dark-bg);
            padding: 15px 0;
            box-shadow: var(--shadow-medium);
            position: fixed; /* Mantener fijo */
            top: var(--top-title-height); /* Posicionar debajo del título principal fijo */
            width: 100%; /* Asegurar que ocupe todo el ancho */
            z-index: 1001; /* Debajo del título principal, encima del resto del contenido */
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            max-width: 240px; /* Doble del tamaño original (120px * 2) */
            height: auto;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-light);
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 20px;
        }

        nav a {
            color: var(--text-color-light);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 15px;
            border-radius: var(--border-radius-sm);
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .hero-section {
            padding: 80px 20px;
            background-color: rgba(0, 0, 0, 0.4); /* Más transparente para ver el fondo */
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }

        .hero-section.hidden {
            opacity: 0;
            visibility: hidden;
            height: 0; /* Colapsar el espacio */
            padding: 0; /* Eliminar padding */
            margin: 0; /* Eliminar margen */
        }

        /* Eliminar estilos de h1 y p del hero-section, ya que ahora están en top-fixed-title */
        .hero-section h1 { display: none; }
        .hero-section p {
            font-size: 1.5em;
            max-width: 800px;
            margin-bottom: 40px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.6);
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius-lg);
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.4);
            text-decoration: none; /* Para usar con <a> */
            display: inline-block;
        }

        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.6);
        }

        /* El main ahora contendrá directamente el acordeón y la sección de contacto */
        main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px; /* Padding general para el main */
        }

        section {
            padding: 60px 20px;
            background-color: rgba(0, 0, 0, 0.7); /* Fondo oscuro para que las letras blancas se vean bien */
            color: var(--text-color-light); /* Letras blancas */
            margin: 0 auto 40px auto; /* Centrar y dar margen inferior */
            width: 100%;
            box-shadow: var(--shadow-strong);
            border-radius: var(--border-radius-md);
            max-width: 1200px;
            box-sizing: border-box; /* Incluir padding en el ancho */
        }

        section h2 {
            font-size: 2.8em;
            color: var(--text-color-light); /* Letras blancas para los títulos de sección */
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .section-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
        }

        .card {
            background-color: white; /* Fondo blanco para las tarjetas */
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-light);
            padding: 25px;
            flex: 1;
            min-width: 280px;
            max-width: 350px;
            text-align: left;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            color: var(--text-color-dark); /* Texto oscuro para las tarjetas (para contraste) */
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .card h3 {
            color: var(--primary-color); /* Título de tarjeta en azul */
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        footer {
            background-color: var(--dark-bg);
            padding: 30px 20px;
            font-size: 0.9em;
            border-top-left-radius: var(--border-radius-md);
            border-top-right-radius: var(--border-radius-md);
            margin-top: auto; /* Empuja el footer al final */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            box-sizing: border-box;
        }

        footer p {
            margin-top: 20px;
            margin-bottom: 0;
            color: var(--text-color-light);
        }

        /* Estilos para el chatbot */
        #chat-window-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px; /* Aproximadamente 10cm es ~378px, ajustado para usabilidad */
            height: 400px;
            background-color: var(--light-bg);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-strong);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: var(--text-color-dark);
            z-index: 1004; /* Por encima de la mayoría de los elementos */
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            transform: translateY(100%); /* Oculto inicialmente abajo */
            opacity: 0;
            pointer-events: none; /* No interactuable cuando está oculto */
        }

        #chat-window-container.show {
            transform: translateY(0); /* Muestra la ventana */
            opacity: 1;
            pointer-events: auto; /* Habilita la interacción */
        }

        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: var(--border-radius-md);
            border-top-right-radius: var(--border-radius-md);
        }

        .chat-header .close-chat {
            font-size: 1.5em;
            cursor: pointer;
            padding: 0 5px;
            line-height: 1;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #f9f9f9;
            text-align: left;
        }
        .chat-input {
            display: flex;
            padding: 15px;
            background-color: #e0e0e0;
            border-top: 1px solid #ccc;
        }
        .chat-input input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #bbb;
            border-radius: var(--border-radius-lg);
            margin-right: 10px;
            font-size: 1em;
            outline: none;
        }
        .chat-input button {
            padding: 10px 15px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius-lg);
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .chat-input button:hover {
            background-color: #3e8e41;
            transform: translateY(-1px);
        }
        .chat-input button:active {
            transform: translateY(1px);
        }
        .message-user {
            text-align: right;
            margin-bottom: 10px;
        }
        .message-bot {
            text-align: left;
            margin-bottom: 10px;
        }
        .message-user span {
            background-color: #cceeff;
            padding: 8px 12px;
            border-radius: 15px;
            display: inline-block;
            max-width: 75%;
            color: var(--text-color-dark); /* Texto oscuro en burbuja de usuario */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .message-bot span {
            background-color: #f0f0f0;
            padding: 8px 12px;
            border-radius: 15px;
            display: inline-block;
            max-width: 75%;
            color: var(--text-color-dark); /* Texto oscuro en burbuja de bot */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Estilos para el Acordeón */
        .accordion-container {
            width: 90%;
            max-width: 900px;
            margin: 40px auto;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-strong);
            overflow: hidden;
            color: var(--text-color-dark); /* Texto oscuro por defecto en el acordeón */
            position: relative;
            z-index: 1003; /* Aumentar el z-index para que esté por encima de los elementos fijos */
            display: none; /* Ocultar el contenedor del acordeón por defecto */
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }

        .accordion-item {
            border-bottom: 1px solid #eee;
            display: none; /* Ocultar todos los items del acordeón por defecto */
        }

        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-item.active-item { /* Clase para mostrar el item activo */
            display: block;
        }

        .accordion-header {
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            font-size: 1.5em;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
            border-radius: var(--border-radius-md); /* Bordes redondeados */
            margin: 10px; /* Margen para separar los headers */
        }

        .accordion-header:hover {
            background-color: #0056b3;
        }

        .accordion-header.active {
            background-color: #004085;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .accordion-header .arrow-icon {
            transition: transform 0.3s ease;
        }

        .accordion-header.active .arrow-icon {
            transform: rotate(90deg); /* Gira el icono de flecha */
        }

        .accordion-header .close-accordion {
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 50%;
            transition: background-color 0.3s ease;
            color: white; /* Color de la X */
        }

        .accordion-header .close-accordion:hover {
            background-color: rgba(255, 255, 255, 0.3); /* Fondo al pasar el ratón por la X */
        }

        .accordion-content {
            padding: 20px;
            background-color: white; /* Fondo blanco para el contenido */
            color: var(--text-color-dark); /* Texto negro para el contenido */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            text-align: left;
            border-bottom-left-radius: var(--border-radius-md);
            border-bottom-right-radius: var(--border-radius-md);
            margin: 0 10px 10px 10px; /* Margen para que coincida con el header */
        }

        .accordion-content.show {
            max-height: 500px; /* Suficiente altura para el contenido */
            padding: 20px;
            box-shadow: var(--shadow-light); /* Añadir sombra para destacar el contenido abierto */
        }

        /* Styles for the appointment form section */
        .hidden-section {
            display: none; /* Hidden by default */
            background-color: var(--light-bg); /* White background */
            color: var(--text-color-dark); /* Black text */
            padding: 40px;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-strong);
            width: 90%;
            max-width: 700px;
            margin: 40px auto;
            text-align: left;
            box-sizing: border-box; /* Ensure padding is included in width */
        }

        .hidden-section h2 {
            color: var(--primary-color); /* Title color */
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: none; /* Remove text shadow for this section */
        }

        .form-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color-dark);
            font-size: 1.1em;
        }

        .form-input {
            padding: 12px 15px;
            border: 1px solid #ccc;
            border-radius: var(--border-radius-sm);
            font-size: 1em;
            width: 100%;
            box-sizing: border-box; /* Ensure padding is included in width */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
            outline: none;
        }

        .form-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .primary-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: var(--border-radius-lg);
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }

        .primary-btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 123, 255, 0.5);
        }

        .secondary-btn {
            background-color: #6c757d; /* Gris para el botón de cerrar */
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: var(--border-radius-lg);
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(108, 117, 125, 0.3);
        }

        .secondary-btn:hover {
            background-color: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(108, 117, 125, 0.5);
        }

        .form-status-message {
            text-align: center;
            margin-top: 20px;
            font-weight: 600;
            color: var(--primary-color); /* Default color for messages */
        }

        .form-status-message.success {
            color: var(--secondary-color); /* Green for success */
        }

        .form-status-message.error {
            color: #dc3545; /* Red for error */
        }

        /* Botón flotante para abrir el chat */
        #open-chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: var(--border-radius-lg);
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            box-shadow: var(--shadow-medium);
            z-index: 1005; /* Asegura que esté por encima de todo */
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        #open-chat-button:hover {
            background-color: #0056b3;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.6);
        }


        /* Media Queries para Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            nav ul {
                flex-direction: column;
                gap: 10px;
            }
            .hero-section h1 {
                font-size: 3em;
            }
            .hero-section p {
                font-size: 1.2em;
            }
            .btn {
                padding: 12px 25px;
                font-size: 1em;
            }
            section {
                padding: 40px 15px;
                margin-bottom: 30px;
            }
            section h2 {
                font-size: 2.2em;
            }
            .card {
                min-width: 100%;
                max-width: 100%;
            }
            #chat-window-container {
                width: 90%; /* Ajustar para pantallas pequeñas */
                max-width: 300px; /* Limitar el ancho máximo */
                right: 5%; /* Ajustar posición */
                left: auto;
            }
            .accordion-header {
                font-size: 1.2em;
                padding: 15px;
            }
            .accordion-content {
                padding: 15px;
            }
            .hidden-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Nuevo elemento fijo para el título principal -->
    <div id="top-fixed-title">
        <h1>SENA CLOUD SERVICES</h1>
    </div>

    <header>
        <div class="header-content">
            <img src="logo.jpg" alt="Logo de SENA CLOUD SERVICES" class="logo">
            <nav>
                <ul>
                    <li><a href="#" data-accordion-target="quienes-somos-content">¿Quiénes somos?</a></li>
                    <li><a href="#" data-accordion-target="servicios-content">Nuestros servicios</a></li>
                    <li><a href="#" data-accordion-target="garantias-content">Nuestras garantías</a></li>
                    <li><a href="#" class="btn" id="agende-cita-nav-btn">Agende su cita</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero-section">
            <!-- El título principal y el párrafo se han movido a #top-fixed-title -->
            <p>Tu socio estratégico en soluciones tecnológicas en la nube. Innovación, seguridad y soporte personalizado para tu empresa.</p>
            <a href="#" class="btn" data-accordion-target="servicios-content">Descubre nuestros servicios</a>
        </section>

        <!-- Contenedor del Acordeón -->
        <div class="accordion-container">
            <div class="accordion-item">
                <div class="accordion-header" data-accordion-id="quienes-somos-content">
                    <span>¿Quiénes somos?</span> <span class="arrow-icon">&#9658;</span> <span class="close-accordion">&times;</span>
                </div>
                <div class="accordion-content" id="quienes-somos-content">
                    <p>En SENA CLOUD SERVICES, somos líderes en la provisión de soluciones integrales en la nube, diseñadas para potenciar la eficiencia y la competitividad de empresas de todos los tamaños. Nuestro equipo de expertos altamente calificados se dedica a entender las necesidades específicas de cada cliente para ofrecer un soporte tecnológico personalizado y de vanguardia.</p>
                    <p>Nuestra trayectoria se basa en la innovación constante y el compromiso con la seguridad de los datos. Desde nuestra fundación, hemos ayudado a numerosas organizaciones a transicionar exitosamente a entornos cloud, optimizando sus operaciones, reduciendo costos y garantizando la continuidad del negocio. Creemos firmemente en el poder de la tecnología para transformar el futuro empresarial.</p>
                    <p>Ofrecemos una amplia gama de servicios que incluyen infraestructura como servicio (IaaS), plataforma como servicio (PaaS), software como servicio (SaaS), y soluciones de seguridad cibernética. Nos enorgullece ser un socio confiable que no solo implementa tecnología, sino que también capacita y acompaña a sus clientes en cada paso de su viaje digital. Nuestra visión es ser el referente en servicios cloud en la región, impulsando el crecimiento y la sostenibilidad de nuestros aliados estratégicos.</p>
                    <p>Trabajamos con las últimas tecnologías y metodologías ágiles para asegurar que nuestras soluciones sean robustas, escalables y adaptables a los desafíos cambiantes del mercado. La satisfacción del cliente es nuestra máxima prioridad, y nos esforzamos por superar las expectativas en cada proyecto.</p>
                    <p>Únete a la familia de SENA CLOUD SERVICES y descubre cómo podemos ayudarte a alcanzar tus objetivos empresariales con la potencia de la nube.</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" data-accordion-id="servicios-content">
                    <span>Nuestros servicios</span> <span class="arrow-icon">&#9658;</span> <span class="close-accordion">&times;</span>
                </div>
                <div class="accordion-content" id="servicios-content">
                    <p>En SENA CLOUD SERVICES, ofrecemos un portafolio completo de soluciones en la nube para satisfacer las demandas de tu negocio. Esto incluye servicios de infraestructura como servidores virtuales y almacenamiento escalable, plataformas para el desarrollo y despliegue de aplicaciones, y software empresarial listo para usar.</p>
                    <p>Además, proporcionamos soluciones avanzadas de ciberseguridad para proteger tus datos y sistemas, así como servicios de consultoría estratégica para ayudarte a planificar y ejecutar tu migración a la nube. Nuestro objetivo es simplificar la tecnología y permitirte concentrarte en el crecimiento de tu empresa.</p>
                    <p>Contamos con expertos en optimización de recursos en la nube, telefonía IP para comunicaciones unificadas, y control organizacional para mejorar la productividad. Cada servicio está diseñado para ser flexible, seguro y ofrecerte el máximo rendimiento con la mejor relación costo-beneficio.</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" data-accordion-id="garantias-content">
                    <span>Nuestras garantías</span> <span class="arrow-icon">&#9658;</span> <span class="close-accordion">&times;</span>
                </div>
                <div class="accordion-content" id="garantias-content">
                    <p>En SENA CLOUD SERVICES, tu tranquilidad es nuestra prioridad. Garantizamos la calidad y fiabilidad de todos nuestros servicios a través de acuerdos de nivel de servicio (SLA) transparentes, asegurando la disponibilidad continua de tus operaciones en la nube. Implementamos las más estrictas medidas de seguridad para proteger tus datos contra cualquier amenaza.</p>
                    <p>Nuestro equipo de soporte técnico especializado está disponible 24/7 para ofrecerte asistencia inmediata y soluciones efectivas. Nos comprometemos a proporcionarte un servicio excepcional y a adaptarnos a tus necesidades, garantizando una experiencia sin interrupciones y un crecimiento sostenido para tu negocio.</p>
                </div>
            </div>
        </div>

        <!-- Sección del Formulario de Cita -->
        <section id="appointment-form-section" class="hidden-section">
            <h2>Agendar su Cita</h2>
            <form id="appointment-form" class="form-layout">
                <div class="form-group">
                    <label for="fullName">Nombre Completo:</label>
                    <input type="text" id="fullName" name="fullName" required class="form-input">
                </div>
                <div class="form-group">
                    <label for="email">Correo Electrónico:</label>
                    <input type="email" id="email" name="email" required class="form-input">
                </div>
                <div class="form-group">
                    <label for="companyClient">Empresa / Cliente:</label>
                    <input type="text" id="companyClient" name="companyClient" class="form-input">
                </div>
                <div class="form-group">
                    <label for="phone">Teléfono:</label>
                    <input type="tel" id="phone" name="phone" class="form-input">
                </div>
                <div class="form-group">
                    <label for="message">Mensaje (opcional):</label>
                    <textarea id="message" name="message" rows="4" class="form-input"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn primary-btn">Enviar Cita</button>
                    <button type="button" id="close-appointment-form" class="btn secondary-btn">Cerrar</button>
                </div>
                <p id="form-message" class="form-status-message"></p>
            </form>
        </section>

        <section id="contacto">
            <h2>Contáctanos</h2>
            <p>¿Listo para llevar tu negocio a la nube? Agenda una cita con nuestros expertos para una consulta personalizada.</p>
            <a href="#" class="btn" id="agendar-cita-contact-btn">Agendar Cita</a>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 SENA CLOUD SERVICES. Todos los derechos reservados.</p>
    </footer>

    <!-- Botón para abrir el chat -->
    <button id="open-chat-button" class="btn">Ir al chat</button>

    <!-- Contenedor de la ventana del chat -->
    <div id="chat-window-container">
        <div class="chat-header">
            <span>Chat de Soporte</span>
            <span class="close-chat">&times;</span>
        </div>
        <div class="chat-messages" id="chat-messages">
            <div class="message-bot"><span>Bienvenidos a SENA CLOUD SERVICES, somos el equipo tecnico, en que te podemos colaborar hoy?</span></div>
        </div>
        <div class="chat-input">
            <input type="text" id="chat-input" placeholder="Escribe tu pregunta...">
            <button id="send-button">Enviar</button>
        </div>
    </div>

    <script type="module">
        // Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', () => {
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-button');

            const appendMessage = (sender, text) => {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add(sender === 'user' ? 'message-user' : 'message-bot');
                const span = document.createElement('span');
                span.textContent = text;
                messageDiv.appendChild(span);
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom
            };

            sendButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            async function sendMessage() {
                const message = chatInput.value.trim();
                if (message === '') return;

                appendMessage('user', message);
                chatInput.value = '';
                sendButton.disabled = true; // Deshabilita el botón mientras espera respuesta

                // Aquí es donde haremos la llamada a tu Netlify Function
                try {
                    const response = await fetch('/.netlify/functions/gemini-chat', { // Ruta a tu Netlify Function
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ prompt: message })
                    });

                    if (!response.ok) {
                        throw new Error(`Error HTTP: ${response.status}`);
                    }

                    const data = await response.json();
                    appendMessage('bot', data.response); // La respuesta real del bot
                } catch (error) {
                    console.error('Error al comunicarse con el chatbot:', error);
                    appendMessage('bot', 'Lo siento, hubo un error al procesar tu solicitud. Intenta de nuevo más tarde.');
                } finally {
                    sendButton.disabled = false; // Habilita el botón de nuevo
                }
            }

            // Firebase setup
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

            let app;
            let db;
            let auth;
            let currentUserId = 'anonymous'; // Default to anonymous

            const initFirebase = async () => {
                if (!app) {
                    app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);

                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        try {
                            const userCredential = await signInWithCustomToken(auth, __initial_auth_token);
                            currentUserId = userCredential.user.uid;
                            console.log("Signed in with custom token:", currentUserId);
                        } catch (error) {
                            console.error("Error signing in with custom token:", error);
                            try {
                                const userCredential = await signInAnonymously(auth);
                                currentUserId = userCredential.user.uid;
                                console.log("Signed in anonymously (fallback):", currentUserId);
                            } catch (anonError) {
                                console.error("Error signing in anonymously:", anonError);
                            }
                        }
                    } else {
                        try {
                            const userCredential = await signInAnonymously(auth);
                            currentUserId = userCredential.user.uid;
                            console.log("Signed in anonymously:", currentUserId);
                        } catch (error) {
                            console.error("Error signing in anonymously:", error);
                        }
                    }
                }
            };

            // Call initFirebase at the start of DOMContentLoaded
            initFirebase();

            // Lógica del Acordeón y Visibilidad de Secciones
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            const navLinks = document.querySelectorAll('nav ul li a[data-accordion-target]');
            const heroSection = document.querySelector('.hero-section');
            const accordionContainer = document.querySelector('.accordion-container');
            const heroDiscoverButton = document.querySelector('.hero-section .btn[data-accordion-target]');
            const appointmentFormSection = document.getElementById('appointment-form-section');
            const appointmentForm = document.getElementById('appointment-form');
            const closeAppointmentFormButton = document.getElementById('close-appointment-form');
            const formMessage = document.getElementById('form-message');
            const agendeSuCitaNavButton = document.getElementById('agende-cita-nav-btn');
            const agendarCitaContactButton = document.getElementById('agendar-cita-contact-btn'); // Nuevo botón de contacto

            // Chatbot elements
            const openChatButton = document.getElementById('open-chat-button');
            const chatWindowContainer = document.getElementById('chat-window-container');
            const closeChatButton = chatWindowContainer.querySelector('.close-chat');


            const closeAllContentSections = () => {
                // Oculta todos los ítems del acordeón
                document.querySelectorAll('.accordion-item').forEach(item => {
                    item.classList.remove('active-item');
                });
                document.querySelectorAll('.accordion-content').forEach(content => {
                    content.classList.remove('show');
                    content.style.maxHeight = null;
                });
                document.querySelectorAll('.accordion-header').forEach(header => {
                    header.classList.remove('active');
                });

                // Oculta el contenedor principal del acordeón
                if (accordionContainer) {
                    accordionContainer.style.display = 'none';
                }
                // Oculta el formulario de cita
                if (appointmentFormSection) {
                    appointmentFormSection.style.display = 'none';
                    appointmentForm.reset(); // Reinicia el formulario
                    formMessage.textContent = ''; // Limpia mensajes del formulario
                }

                // Muestra la sección hero
                if (heroSection) {
                    heroSection.classList.remove('hidden');
                }
            };

            const openContentSection = (targetId) => {
                closeAllContentSections(); // Cierra todo antes de abrir el nuevo

                if (targetId === 'appointment-form-section') {
                    // Abrir el formulario de cita
                    if (appointmentFormSection) {
                        appointmentFormSection.style.display = 'block';
                        if (heroSection) {
                            heroSection.classList.add('hidden');
                        }
                        appointmentFormSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                } else {
                    // Abrir un ítem del acordeón
                    const targetContent = document.getElementById(targetId);
                    const targetHeader = document.querySelector(`.accordion-header[data-accordion-id="${targetId}"]`);
                    const targetItem = targetContent ? targetContent.closest('.accordion-item') : null;

                    if (targetContent && targetHeader && targetItem) {
                        if (accordionContainer) {
                            accordionContainer.style.display = 'block';
                        }
                        if (heroSection) {
                            heroSection.classList.add('hidden');
                        }

                        targetItem.classList.add('active-item');
                        targetContent.classList.add('show');
                        targetContent.style.maxHeight = targetContent.scrollHeight + "px";
                        targetHeader.classList.add('active');
                        targetHeader.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            };

            // Event listeners para los encabezados del acordeón
            accordionHeaders.forEach(header => {
                const closeButton = header.querySelector('.close-accordion');

                // Listener para el clic en el encabezado (excluyendo el botón de cerrar)
                header.addEventListener('click', (e) => {
                    if (e.target !== closeButton) {
                        const targetId = header.dataset.accordionId;
                        const targetContent = document.getElementById(targetId);
                        const targetItem = targetContent ? targetContent.closest('.accordion-item') : null;

                        if (targetItem && targetItem.classList.contains('active-item') && targetContent.classList.contains('show')) {
                            closeAllContentSections();
                        } else {
                            openContentSection(targetId);
                        }
                    }
                });

                // Listener para el clic en el botón de cerrar (la 'x')
                if (closeButton) {
                    closeButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        closeAllContentSections();
                    });
                }
            });

            // Event listeners para los enlaces de navegación
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.dataset.accordionTarget) {
                        e.preventDefault();
                        openContentSection(link.dataset.accordionTarget);
                    }
                });
            });

            // Event listener para el botón "Descubre nuestros servicios" en la sección hero
            if (heroDiscoverButton) {
                heroDiscoverButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    openContentSection(heroDiscoverButton.dataset.accordionTarget);
                });
            }

            // Event listener para el botón "Agende su cita" en la navegación
            if (agendeSuCitaNavButton) {
                agendeSuCitaNavButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    openContentSection('appointment-form-section');
                });
            }

            // Listener para el botón "Agendar Cita" en la sección de contacto
            if (agendarCitaContactButton) {
                agendarCitaContactButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    openContentSection('appointment-form-section');
                });
            }

            // Listener para el botón "Cerrar" del formulario de cita
            if (closeAppointmentFormButton) {
                closeAppointmentFormButton.addEventListener('click', () => {
                    closeAllContentSections();
                });
            }

            // Chatbot visibility logic
            if (openChatButton && chatWindowContainer && closeChatButton) {
                openChatButton.addEventListener('click', () => {
                    chatWindowContainer.classList.add('show');
                    openChatButton.style.display = 'none'; // Hide the open button
                });

                closeChatButton.addEventListener('click', () => {
                    chatWindowContainer.classList.remove('show');
                    openChatButton.style.display = 'block'; // Show the open button
                });
            }

            // Establecer el estado inicial al cargar la página
            closeAllContentSections();
            // Asegurarse de que el botón de chat esté visible al inicio
            if (openChatButton) {
                openChatButton.style.display = 'block';
            }
        });
    </script>
</body>
</html>